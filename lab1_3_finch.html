<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>3. Finch Data Example</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link rel="stylesheet" href="lightbox.css" type="text/css" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Organismal Biology</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data Lab 1
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lab1.html">Data Lab 1</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="lab1_1_rstudio.html">Part 1: RStudio Project</a>
    </li>
    <li>
      <a href="lab1_2_calc.html">Part 2: R as a Calculator</a>
    </li>
    <li>
      <a href="lab1_3_finch.html">Part 3: Finch Example</a>
    </li>
    <li>
      <a href="lab1_4_bluestem.html">Part 4: Bluestem Assignment</a>
    </li>
  </ul>
</li>
<li>
  <a href="lab2.html">Data Lab 2</a>
</li>
<li>
  <a href="bird_banding.html">Bird Banding</a>
</li>
<li>
  <a href="free.html">FREE</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">3. Finch Data Example</h1>

</div>


<p>In Part 3 of this lab, you will be introduced to scripts, graphing, and analysis in R. You will use the Finches dataset to learn how to read a tabular dataset into R, inspect it, and perform basic statistical summaries on it. You will estimate means, standard deviations, standard errors of the mean, and confidence intervals around the mean. You will also learn how to plot histograms and bar charts (also called column charts).</p>
<div id="introduction" class="section level3">
<h3>Introduction</h3>
<p>In the finch dataset, each row represents an individual bird that was banded before the 1977 drought on Daphne Major island in the Galapagos archipelago. The variable named <code>outcome</code> contains one of two values: “survived” or “died”, depending on whether the bird was ever seen after the drought or not.</p>
<p>The question you are tasked with answering for Part 3 is:</p>
<blockquote class="text-success">
Did beak length vary between birds that survived the drough and those that did not?
</blockquote>
<p>The following sections will guide you through the process of answering this question using the data provided.</p>
</div>
<div id="download-the-data" class="section level3">
<h3>Download the data</h3>
<p>Download the data and save it in the project directory (folder) you created earlier. For example, if you created your project in the <strong>Documents</strong> folder and named it <strong>Org Bio Data Lab 1</strong> then save the data into the <strong>Org Bio Data Lab 1</strong> folder.</p>
<p>You will know you saved it to the correct location if the Excel file shows up in the Files pane in RStudio next to your R Project file.</p>
<p><a href="finches_data.xlsx" class="btn btn-default">Download</a></p>
<p>If you want to look at the data, you can open the file in Excel.</p>
</div>
<div id="r-scripts" class="section level3">
<h3>R scripts</h3>
<div id="create-a-script" class="section level4">
<h4>Create a script</h4>
<p>So far you have been running commands by typing them into the console. One of the benefits of R over programs such as Excel, for example, is the ability to save your commands in the form of written. Enter the <strong>script</strong>! A script is simply a text file containing commands for R to execute.</p>
<p>To create a script, click File &gt; New File &gt; R Script or click the New File button on the toolbar. A new pane will open above your Console pane. This is called the script pane.</p>
<p>It is always a good idea to save it right away, just in case RStudio crashes or you spill Orange Fanta all over the computer (which is a completely hypothetical example and has never happened before. Really!).</p>
<p>Go to File &gt; Save or click the floppy disk icon on the Source pane toolbar (not the global toolbar). When prompted for a file name, use “finch”. RStudio will automatically add the “.R” file extension, so when your new scrip appears in the Files pane it will say “finch.R”.</p>
</div>
<div id="run-code-from-a-script" class="section level4">
<h4>Run code from a script</h4>
<p>Now that you have a script, try typing some code in it. For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="dv">9</span>)</a></code></pre></div>
<p>To run the code, place your cursor on the same line as the code as click Run on the Source pane toolbar, then Run Selected Lines. Or just hold down the command button and press the enter key. This is called a keyboard shortcut, and is written as <strong>Cmd+Enter</strong>.</p>
<p>When you run the line of code, RStudio copies it to the Console pane and executes it.</p>
<p><span class="label label-info">Tip</span> From now on, run code from a script rather than the console.</p>
<p><span class="label label-success">Pro Tip</span> Copy code directly from the tutorial and paste it into your R script, comments and all. It saves time and you’re less likely to make a typo.</p>
</div>
</div>
<div id="r-packages" class="section level3">
<h3>R packages</h3>
<p>In R, users share code with each other in the form of <strong>packages</strong>, each of which is a bundle of code, data, and other files. While R includes some basic functionality in it’s “base” packages, you often need to work with other packages when doing any data analysis.</p>
<p>In this tutorial you will use a group of packages collectively referred to as the <strong>tidyverse</strong>. You don’t need to know their names, but they include the <strong>dplyr</strong>, <strong>ggplot</strong>, and <strong>readxl</strong> packages, among many others.</p>
<p>Before you can use a package, you to download and install it. Click the <strong>Package</strong> tab in the botom right pane and click <strong>Install</strong>. Type the name of the package, <code>tidyverse</code>, and click <strong>Install</strong>. This will install the <code>tidyverse</code> package and all those others mentione above.</p>
<p>You only have to install a package once on each computer you are using. If you open RStudio again later, every package you’ve ever installed wil still be there.</p>
</div>
<div id="read-the-data-into-r" class="section level3">
<h3>Read the data into R</h3>
<p>Now that you have a script and have downloaded your packages, you’re ready to get coding!</p>
<p>The first lines in any script are usually for loading the packages into memory. Copy these two lines (including the comments if you want) and paste them into your script.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(readxl)                <span class="co"># load readxl, for reading Excel files</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">library</span>(tidyverse)             <span class="co"># load tidyverse, for working with datasets</span></a></code></pre></div>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 3.5.1</code></pre>
<pre><code>## -- Attaching packages --------------</code></pre>
<pre><code>## v ggplot2 2.2.1.9000     v purrr   0.2.5     
## v tibble  1.4.2          v dplyr   0.7.5     
## v tidyr   0.8.1          v stringr 1.3.1     
## v readr   1.1.1          v forcats 0.3.0</code></pre>
<pre><code>## -- Conflicts -----------------------
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Put your cursor on the first line and type Cmd+Enter to run it. The cursor automatically moves to the next line, so you can type Cmd+Enter again to run the next line.</p>
<p>You will see a warning and some messages in the Console tab, but those can be safely ignored.</p>
<p>To read the data, you will use a function named <code>read_excel()</code>. Here we run that function and assign the results to an object names <code>finches</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">finches &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;finches_data.xlsx&quot;</span>)</a></code></pre></div>
<p><span class="label label-warning">Warning</span> If you haven’t saved your data file in the right place, or if you are not working with your RStudio project open, you may get an error message in the console. If you can’t figure out how to solve the problem yourself, ask your instructor for help.</p>
<p>To get a quick look at the data, print the <code>finches</code> object to the console:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">finches</a></code></pre></div>
<pre><code>## # A tibble: 100 x 12
##     band species     sex   first_adult_year last_year outcome weight  wing
##    &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1     9 Geospiza f~ unkn~             1975      1977 died      14.5  67  
##  2    12 Geospiza f~ fema~             1975      1977 died      13.5  66  
##  3   276 Geospiza f~ unkn~             1976      1977 died      16.4  64.2
##  4   278 Geospiza f~ unkn~             1976      1977 died      18.5  67.2
##  5   283 Geospiza f~ male              1976      1977 died      17.4  70.2
##  6   288 Geospiza f~ unkn~             1976      1977 died      16.3  71.2
##  7   293 Geospiza f~ unkn~             1976      1977 died      15.7  67.2
##  8   294 Geospiza f~ unkn~             1976      1977 died      16.8  68.2
##  9   298 Geospiza f~ male              1976      1977 died      15.5  68.2
## 10   307 Geospiza f~ male              1975      1977 died      17.5  70  
## # ... with 90 more rows, and 4 more variables: tarsus &lt;dbl&gt;,
## #   beak_length &lt;dbl&gt;, beak_depth &lt;dbl&gt;, beak_width &lt;dbl&gt;</code></pre>
<p>The first thing you notice is that this object is not a vector like the objects you were working with before. Instead, it’s a <strong>tibble</strong>, which is an object that stores tabular data.</p>
<p>The first line of the output gives the data type (tibble) and dimensions of the data (number of rows x number of columns). In the tidyverse, columns are referred to as “variables”.</p>
<p>The first 10 rows are shown, as well as the first few variables. How many variables depends on how wide your Console window is.</p>
<p>For each variable, it’s name is given, followed by the type of data. Most of the time we worth with either numeric data (<code>&lt;dbl&gt;</code>) or text data (<code>&lt;chr&gt;</code>).</p>
<p>If there are more than 10 rows, or more variables than can fit on the screen, there will be a sentence at the end saying “… with xx more rows, and x more variables”, followed by a list of the unshown variables.</p>
<p>A quick way of seeing the first few observations for all variables is to use the <code>glimpse()</code> function:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">glimpse</span>(finches)</a></code></pre></div>
<pre><code>## Observations: 100
## Variables: 12
## $ band             &lt;dbl&gt; 9, 12, 276, 278, 283, 288, 293, 294, 298, 307...
## $ species          &lt;chr&gt; &quot;Geospiza fortis&quot;, &quot;Geospiza fortis&quot;, &quot;Geospi...
## $ sex              &lt;chr&gt; &quot;unknown&quot;, &quot;female&quot;, &quot;unknown&quot;, &quot;unknown&quot;, &quot;m...
## $ first_adult_year &lt;dbl&gt; 1975, 1975, 1976, 1976, 1976, 1976, 1976, 197...
## $ last_year        &lt;dbl&gt; 1977, 1977, 1977, 1977, 1977, 1977, 1977, 197...
## $ outcome          &lt;chr&gt; &quot;died&quot;, &quot;died&quot;, &quot;died&quot;, &quot;died&quot;, &quot;died&quot;, &quot;died...
## $ weight           &lt;dbl&gt; 14.50, 13.50, 16.44, 18.54, 17.44, 16.34, 15....
## $ wing             &lt;dbl&gt; 67.00, 66.00, 64.19, 67.19, 70.19, 71.19, 67....
## $ tarsus           &lt;dbl&gt; 18.00, 18.30, 18.47, 19.27, 19.27, 20.27, 17....
## $ beak_length      &lt;dbl&gt; 9.20, 9.50, 9.93, 11.13, 12.13, 10.63, 9.93, ...
## $ beak_depth       &lt;dbl&gt; 8.3, 7.5, 8.0, 10.6, 11.2, 9.1, 9.5, 10.5, 8....
## $ beak_width       &lt;dbl&gt; 8.1, 7.5, 7.6, 9.4, 9.5, 8.8, 8.9, 9.1, 8.2, ...</code></pre>
</div>
<div id="plot-a-histogram" class="section level3">
<h3>Plot a histogram</h3>
<p>The first step in any data analysis is always to plot the data.</p>
<p>Because we want to compare means between two groups, a useful plot is a <strong>histogram</strong>, which shows how often each value (or range of values) was observed.</p>
<p>Plotting in the tidyverse is most easily accomplished using the <code>ggplot()</code> function and its associated helper functions.</p>
<p>For example, to plot a histogram of the <code>beak_length</code> variable, use the following code. Note the use of a <code>+</code> after the <code>ggplot()</code> function. Copy this code to your script and run it. RStudio is smart enough to recognize that it should all be run together, so putting your cursor on any of these lines and typing Cmd+Enter will run all the lines at once.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">  <span class="dt">data =</span> finches,                  <span class="co"># use the finches dataset</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> beak_length)   <span class="co"># put beak length on the x axis</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">12</span>)        <span class="co"># use 12 bins (default is 30)</span></a></code></pre></div>
<p><img src="lab1_3_finch_files/figure-html/histogram-1.png" width="672" /> You can plot histograms of other variables by changing the <code>x =</code> part of the code.</p>
<p>You can also experiment with different numbers of bins. The goal is to have enough that you can see a hump-shaped distribution, but not so many that you have too many bins with few or no observations. Try plotting a histogram with 50 bins, and another with 3 bins. Not very informational, are they?</p>
<p>Sometimes we want to see how the distribution of a variable varies aong different subsets of the data. For example, to answer our question we want to see how beak length varies between birds that did or did not survive the drought. One easy way to do this is with the <code>facet_wrap()</code> function in ggplot. Note that you have to add a <code>+</code> operator after the <code>geom_histogram()</code> line.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">  <span class="dt">data =</span> finches, </a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> beak_length, <span class="dt">fill =</span> outcome)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">14</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>outcome, <span class="dt">ncol =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="lab1_3_finch_files/figure-html/grouped-histogram-1.png" width="672" /></p>
<p>The last thing you might want to do is spruce up your plot by adding better axis labels and removing the redundant color legend. This is done with the <code>labs()</code> function and the :</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">  <span class="dt">data =</span> finches, </a>
<a class="sourceLine" id="cb14-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> beak_length, <span class="dt">fill =</span> outcome)</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">14</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>outcome, <span class="dt">ncol =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st">            </span><span class="co"># remove color legend</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="st">  </span><span class="kw">labs</span>(                             <span class="co"># add labels</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9">    <span class="dt">x =</span> <span class="st">&quot;Beak Length (mm)&quot;</span>,         <span class="co">#   x axis (horizontal)</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10">    <span class="dt">y =</span> <span class="st">&quot;Number of Birds&quot;</span>           <span class="co">#   y axis (vertical)</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11">  )</a></code></pre></div>
<p><img src="lab1_3_finch_files/figure-html/grouped-histogram-labels-1.png" width="672" /></p>
<div id="export-your-figure" class="section level4">
<h4>Export your figure</h4>
<p>To put your figure in a Microsoft Word document (your assignment in part 4), you must first save it as an image file on your computer. You can do this with <code>ggsave()</code>, which saves the most recent ggplot displayed.</p>
<p>You choose a file name, the dimensions of the output file (think about how big you want this to be when you paste it into a word document), and the units of the dimensions (e.g <code>&quot;in</code> for inches). For example, this code saves your histogram as a 3.5&quot; x 3.5&quot; PNG file:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># save your most recent plot</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw">ggsave</span>(<span class="st">&quot;Beak Length Histogram.png&quot;</span>,   <span class="co"># you choose a name for the file</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">       <span class="dt">width =</span> <span class="fl">3.5</span>, <span class="dt">height =</span> <span class="fl">3.5</span>,     <span class="co"># height and width of output</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4">       <span class="dt">units =</span> <span class="st">&quot;in&quot;</span>)                  <span class="co"># what units are height &amp; width?</span></a></code></pre></div>
<p>Look in your project directory and you’ll see a file named <strong>Beak Length Histogram.png</strong> now. You can click it to open the file in your computer’s default image viewer.</p>
</div>
</div>
<div id="summarizing-datasets" class="section level3">
<h3>Summarizing datasets</h3>
<p>Scientists often want a quick summary of a dataset. The <code>summary()</code> function provides just that, and is especially useful for seeing summary statistics of numerical variables. Running this function prints a summary to the console, with the minimum value, median value, mean, maximum value, and first and third quartiles given for each numerical variable:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">summary</span>(finches)</a></code></pre></div>
<pre><code>##       band          species              sex            first_adult_year
##  Min.   :   9.0   Length:100         Length:100         Min.   :1973    
##  1st Qu.: 421.5   Class :character   Class :character   1st Qu.:1975    
##  Median : 613.5   Mode  :character   Mode  :character   Median :1975    
##  Mean   :1174.0                                         Mean   :1975    
##  3rd Qu.:1588.2                                         3rd Qu.:1976    
##  Max.   :8191.0                                         Max.   :1976    
##    last_year      outcome              weight           wing      
##  Min.   :1977   Length:100         Min.   :13.00   Min.   :64.00  
##  1st Qu.:1977   Class :character   1st Qu.:15.00   1st Qu.:67.00  
##  Median :1978   Mode  :character   Median :16.24   Median :68.19  
##  Mean   :1978                      Mean   :16.35   Mean   :68.54  
##  3rd Qu.:1978                      3rd Qu.:17.44   3rd Qu.:70.25  
##  Max.   :1982                      Max.   :21.24   Max.   :74.01  
##      tarsus       beak_length      beak_depth       beak_width    
##  Min.   :17.05   Min.   : 8.70   Min.   : 7.500   Min.   : 7.400  
##  1st Qu.:18.49   1st Qu.:10.20   1st Qu.: 8.795   1st Qu.: 8.200  
##  Median :19.13   Median :10.80   Median : 9.305   Median : 8.600  
##  Mean   :19.19   Mean   :10.79   Mean   : 9.392   Mean   : 8.641  
##  3rd Qu.:20.00   3rd Qu.:11.25   3rd Qu.:10.100   3rd Qu.: 9.055  
##  Max.   :21.06   Max.   :12.73   Max.   :11.210   Max.   :10.070</code></pre>
<p>If we want to do anything more than, then we need to use functions provided in the tidyverse to summarize the data. The following code will summarize a dataset by calculating the mean, standard deviation and standard error of the mean (SEM) of the <code>beak_length</code> variable.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># summarize the entire dataset</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">summary &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span>finches <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(beak_length),</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">            <span class="dt">sd =</span> <span class="kw">sd</span>(beak_length),</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">            <span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sem =</span> sd <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(n),</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">         <span class="dt">upper =</span> mean <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>sem,</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">         <span class="dt">lower =</span> mean <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>sem)</a>
<a class="sourceLine" id="cb18-10" data-line-number="10"></a>
<a class="sourceLine" id="cb18-11" data-line-number="11">summary</a></code></pre></div>
<pre><code>## # A tibble: 1 x 6
##    mean    sd     n    sem upper lower
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  10.8 0.819   100 0.0819  11.0  10.6</code></pre>
<p>If we wanted to get separate summaries for different subsets of the data, we can add the <code>group_by()</code> function like this:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">grouped_summary &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">  </span>finches <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(outcome) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(beak_length),</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">            <span class="dt">sd =</span> <span class="kw">sd</span>(beak_length),</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">            <span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sem =</span> sd <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(n),</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">         <span class="dt">upper =</span> mean <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>sem,</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">         <span class="dt">lower =</span> mean <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>sem)</a>
<a class="sourceLine" id="cb20-10" data-line-number="10"></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co"># print the results in the console</span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12">grouped_summary</a></code></pre></div>
<pre><code>## # A tibble: 2 x 7
##   outcome   mean    sd     n    sem upper lower
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 died      10.5 0.698    50 0.0987  10.7  10.3
## 2 survived  11.1 0.840    50 0.119   11.3  10.8</code></pre>
<p>To plot these means and confidence intervals, you can use a bar chart with the <code>geom_col()</code> and <code>geom_errorbar()</code> functions in ggplot:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">ggplot</span>(</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">  <span class="dt">data =</span> grouped_summary, </a>
<a class="sourceLine" id="cb22-3" data-line-number="3">  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> outcome, <span class="dt">y =</span> mean, <span class="dt">fill =</span> outcome)</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_errorbar</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> lower, <span class="dt">ymax =</span> upper), <span class="dt">width =</span> <span class="fl">.3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">    <span class="dt">x =</span> <span class="st">&quot;Survival Outcome&quot;</span>,</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">    <span class="dt">y =</span> <span class="st">&quot;Beak Length (mm)&quot;</span></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">  )</a></code></pre></div>
<p><img src="lab1_3_finch_files/figure-html/bar-chart-1.png" width="384" /></p>
<div id="export-your-figure-1" class="section level4">
<h4>Export your figure</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">ggsave</span>(<span class="st">&quot;Beak Length Bar Chart.png&quot;</span>, </a>
<a class="sourceLine" id="cb23-2" data-line-number="2">       <span class="dt">width =</span> <span class="fl">2.5</span>, <span class="dt">height =</span> <span class="fl">3.5</span>, <span class="dt">units =</span> <span class="st">&quot;in&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="t-test" class="section level3">
<h3>t-test</h3>
<p>Plotting the means and confidence intervals of measurements in the two groups of birds is an important step in data analysis. To perform a more rigourous comparison, however, you may run a t-test to tell if the difference in means is likely due to chance (i.e. sampling error) or not.</p>
<p>The t-test function in R is a bit picky… it requires you to give it two arguments: a vector of measurements for one group and another vector of measurements for the other group. To do this, you must perform three steps:</p>
<ol style="list-style-type: decimal">
<li>Create a vector of beak lengths for birds that died.</li>
<li>Create a vector of beak lengths for birds that survived.</li>
<li>Compare the two vectors using a t-test.</li>
</ol>
<p>STEP 1: The following code will take a dataset, in this case <code>finches</code>, remove rows that do not meet a given criteria, and extract the column of interest as a vector, and store the result as a new object named <code>beak_length_died</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># create a vector of beak lengths for birds that died</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">beak_length_died &lt;-</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="st">  </span>finches <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(outcome <span class="op">==</span><span class="st"> &quot;died&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="st">  </span><span class="kw">pull</span>(beak_length)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6"></a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="co"># print the results in the console</span></a>
<a class="sourceLine" id="cb24-8" data-line-number="8">beak_length_died</a></code></pre></div>
<pre><code>##  [1]  9.20  9.50  9.93 11.13 12.13 10.63  9.93 11.33  9.93 11.10 10.80
## [12]  9.70 10.60  9.60 10.50  9.90  9.60 10.70  9.30 10.10  9.70 11.00
## [23] 11.00 11.60 10.50 10.20  9.70 11.10 11.10 10.20 10.80 10.00 11.10
## [34] 10.30 11.10 10.50 11.00 10.00 10.30 11.70 10.20 10.90 11.90 10.20
## [45] 10.50 10.50  9.80 11.80 11.00 10.30</code></pre>
<p>STEP 2: Now copy that code and change “died” to “survived” in your object name, so <code>beak_length_survived</code>, and in the filter criteria, so <code>outcome == &quot;survived&quot;</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="co"># create a vector of beak lengths for birds that died</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2">beak_length_survived &lt;-</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="st">  </span>finches <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(outcome <span class="op">==</span><span class="st"> &quot;survived&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="st">  </span><span class="kw">pull</span>(beak_length)</a>
<a class="sourceLine" id="cb26-6" data-line-number="6"></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="co"># print the results in the console</span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8">beak_length_survived</a></code></pre></div>
<pre><code>##  [1] 11.50 10.20 12.10 11.60 10.30 11.40  8.70  9.90 10.20 10.30 11.43
## [12] 11.93 11.03 10.63 10.83 11.23 11.23 10.23 11.63 12.23 11.03 11.13
## [23] 10.93 11.03 10.23 11.33 10.03 10.70 10.00 12.43 11.09  9.63 11.60
## [34] 11.30 12.13 12.03 10.63 11.83 12.43 12.73 10.33 11.03 12.53 12.13
## [45] 10.43 10.53 11.23 11.23 10.90 10.50</code></pre>
<p>STEP 3: Perform a t-test using the <code>t.test()</code> function:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">t.test</span>(beak_length_died, beak_length_survived)</a></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  beak_length_died and beak_length_survived
## t = -3.6335, df = 94.807, p-value = 0.0004539
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -0.8681443 -0.2546557
## sample estimates:
## mean of x mean of y 
##   10.5122   11.0736</code></pre>
<p>The two numbers to focus on here are the <strong>p-value</strong> and the <strong>95% confidence interval</strong>.</p>
<p>The <em>p</em>-value tells you what proportion of the time you would expect to find a difference in population like these two if they were in fact the same. Scientists generally use a cutoff (or <em>alpha level</em>) of 0.05 to determine if a difference is “statistically significant”. In this case, a <em>p</em>-value of 0.0004539 is much lower than 0.05, so we can reject our null hypothesis and accept our alternative hypothesis that the true difference in means is not equal to 0.</p>
<p>As further evidence that the difference between the means is not equal to zero, you can see that the 95% confidence interval does not include zero.</p>
<p>To report the findings of a t-test, for example in the Results section of a report or scientific article, you would say:</p>
<blockquote class="text-info">
Mean beak depths were 11.1 mm in survivors and 10.5 mm in non-survivors (Figure 1). This difference was stastistically significant according to a Welch’s two-sample t-test assuming unequal variances (t=3.6335, df=94.807, p=0.0004539).
</blockquote>
<p>When you’re ready, you can move on to Part 4.</p>
</div>
<div id="part-4.-bluestem-data-assignment" class="section level3">
<h3><a href="lab1_4_bluestem.html">Part 4. Bluestem Data Assignment →</a></h3>
</div>

<div class="footer">
  <p>Copyright &copy; 2018 Chris Merkord. All rights reserved.</p>
</div>
<script src="lightbox.js"></script>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
